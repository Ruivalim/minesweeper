"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,i,e){return i&&_defineProperties(t.prototype,i),e&&_defineProperties(t,e),t}var Field=function(){function t(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:700,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:70;_classCallCheck(this,t),this.canvas=i,this.width=s,this.height=h,this.resolution=n,this.mines=e,this.cols=Math.ceil(this.width/this.resolution),this.rows=Math.ceil(this.height/this.resolution),this.ctx=this.canvas.getContext("2d"),this.canvas.height=this.height,this.canvas.width=this.width,this.bombValue="bomb",this.fontSize=15}return _createClass(t,[{key:"generateMap",value:function(){var t=this;return new Array(this.cols).fill(null).map((function(){return new Array(t.rows).fill(null).map((function(){return 0}))}))}},{key:"placeMines",value:function(t){for(var i=this.mines,e=0;e<i;)for(var s=!1,h=0;h<t.length&&!s;h++)for(var n=0;n<t[h].length&&!s;n++){Math.random()<1e-5&&0==s&&(t[h][n]=this.bombValue,e++,s=!0)}return t}},{key:"placeHints",value:function(t){for(var i=0;i<t.length;i++)for(var e=0;e<t[i].length;e++)if(t[i][e]!==this.bombValue){var s=0;i!==this.cols&&t[i][e+1]==this.bombValue&&(s+=1),0!==e&&t[i][e-1]==this.bombValue&&(s+=1),0!==i&&t[i-1][e]==this.bombValue&&(s+=1),i!==this.cols-1&&t[i+1][e]==this.bombValue&&(s+=1),i!==this.cols-1&&e!==this.rows-1&&t[i+1][e+1]==this.bombValue&&(s+=1),0!==i&&e!==this.rows-1&&t[i-1][e+1]==this.bombValue&&(s+=1),0!==i&&0!==e&&t[i-1][e-1]==this.bombValue&&(s+=1),i!==this.cols-1&&0!==e&&t[i+1][e-1]==this.bombValue&&(s+=1),0==s&&(s=" "),t[i][e]=s}return t}},{key:"draw",value:function(t){for(var i=0;i<t.length;i++)for(var e=0;e<t[i].length;e++){var s=t[i][e];this.ctx.beginPath(),this.ctx.font=this.fontSize+"px Arial",this.ctx.textAlign="center",s==this.bombValue?this.ctx.fillStyle="black":this.ctx.fillStyle="white",this.ctx.strokeRect(i*this.resolution,e*this.resolution,this.resolution,this.resolution),this.ctx.strokeText(s,Math.ceil(i*this.resolution+this.resolution/2),Math.ceil(e*this.resolution+(this.resolution/2+this.fontSize/2)))}}}]),t}();